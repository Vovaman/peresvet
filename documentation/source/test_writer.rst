Тестовый пример
===============
После успешной :doc:`установки <installation>` компонентов выполним тестовый пример, показывающий совместную работу 
трёх компонентов:

#. Скрипт, записывающий в цикле данные в базу;
#. Victoriametrics, хранящая данные;
#. Grafana для отображения данных в режиме реального времени.

В качестве протокола, который будем использовать в качестве общения между всеми компонентами, возьмём `OpenTSDB <http://opentsdb.net/>`_, так как это достаточно
простой протокол.

.. warning::

   OpenTSDB не поддерживает запись данных в виде строк.
   Только целые и вещественные числа.

Настройка Victoriametrics
+++++++++++++++++++++++++
Для того, чтобы Victoriametrics могла работать по протоколу OpenTSDB, необходимо в командную строку её запуска добавить ключ.

Для этого открываем на редактирование файл с ключами командной строки:

.. code-block:: bash
    
   $ sudo nano /var/snap/victoriametrics/133/extra_flags

...и приводим его к виду:

.. code-block::

   FLAGS="-opentsdbHTTPListenAddr=:4242"
   
Перезапускаем Victoriametrics:

.. code-block:: bash

   $ sudo snap restart victoriametrics

Теперь Victoriametrics будет работать по протоколу OpenTSDB по порту 4242.