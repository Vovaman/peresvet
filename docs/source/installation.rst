.. _installation:

Установка
=========

Опишем самый простой случай установки и запуска платформы.

Системные требования:

#. Ubuntu 22.04
#. `Docker <https://docs.docker.com/engine/install/>`_.
   Для Docker не забудьте выполнить
   `настройку <https://docs.docker.com/engine/install/linux-postinstall/>`_.
#. `Git <https://git-scm.com/>`_.

Платформа MPC-Пересвет
----------------------
Базовый способ развёртывания платформы - в виде docker-контейнеров.

#. Клонируем проект платформы:

   .. code:: sh

      $ git clone git@github.com:mp-co-ru/mpc-peresvet.git
#. Заходим в каталог проекта:

   .. code:: sh

      $ cd mpc_peresvet

#. Запускаем платформу:

   .. code:: sh

      $ ./run.sh

В результате будут запущены следующие компоненты платформы:

#. Брокер сообщений RabbitMQ
#. Служба каталогов OpenLDAP
#. База данных PostgreSQL (данные будут храниться внутри контейнера)
#. Сервисы группы ``objects``
#. Сервисы группы ``dataStorages``
#. Сервисы группы ``tags``
#. Сервисы группы ``alerts``
#. Сервисы группы ``methods``
#. Сервисы группы ``schedules``

Grafana
-------
Установим Grafana также в контейнере:

.. code:: sh

   $ docker run -d -p 3000:3000 --name=grafana grafana/grafana-enterprise

Команда создаст и запустит контейнер, который в следующий раз будем запускать
командой

.. code:: sh

   $ docker start grafana

Таким образом, мы установили и запустили платформу, а также приложение для
создания/просмотра экранов мониторинга.

Следующие шаги для создания рабочей системы:

#. Создать теги (или полноценную иерархию)
#. Подключить к тегам источник(и) данных
#. Создать в Grafan'е экраны для мониторинга данных
